●エンティティ間のRelationShipについて。
	<insert>
	Member: OK
	Practice: OK
	Attendace: 登録時にRefKeyを取得できる。
	
	<update>
	Member: Key不変ならOK
	Practice: Key不変ならOK
	Attendace: Key,RefKeyはupdateすべきではない。
	
	<delete>
	Member: 対応するAttendenceも消す必要がある。
	Practice: 対応するAttendenceも消す必要がある。
	Attendance: OK
	
	<Relationship>
	Member(1) - (n)Attendance
	Practice(1) - (n)Attendance


●IDを更新することについて。
	更新後のIDが既に登録されていてはエラーとしなければならない。（入力画面を再表示する必要がある。エラーメッセージ表示要。）
	IDを更新しない場合:	IDでとれないのがエラー	
	IDを更新する場合：	IDでとれるのがエラー
	
	つまり、以下のような処理を行うことになる。
		IDでEntityが取得できる場合
			IDが更新されていない場合（<- Keyで取得したEntity.Id == inputID の場合）
				OK
			IDが更新されている場合
				エラー
		IDでEntityが取得できる場合
			OK


●出欠入力ページの仕様について
一括入力
初期表示はシステム日付から取得した月の練習情報
前の月、次の月への移動が可能。ただし、画面で出欠情報を入力していたら、内容を破棄しても良いかどうかのダイアログ表示。JS
入力は未定も許す。
一度入力済みの項目についてはグレーアウト(Disabled)初期表示。横に更新するボタンを配置し、ボタンが押下されたらEnabledに変更。（ただしマネージャが更新したもの（※当日日付以前にするかも）については、更新ボタンもDisabled。出欠情報改ざん防止のため。）JS
決定するボタンを押下したら、グレーアウトのもの、未定のもの以外はUpdateする。

出欠状況確認
初期表示はシステム日付から取得した月の出欠状況
指定期間検索表示が可能。
個別の登録・更新ページに遷移可能（ただし更新不可のものはNG）
特定日入力


と思ったがJSはガラケーでは使用できるか不明なので代替案として以下。
　-> ガラケー用に別ページ作る。

一括入力
あくまでも月の入力を前提とする。既存の入力項目については初期表示はするが、無断で更新してしまう。
月移動はダイアログなし。（ただし決定しておかなきゃダメだとよ近くに記載する。）




○練習検索の初期表示について
本日より以前の練習日については初期表示を行わない（別ページで表示）
練習日の表示順は練習開始日時の昇順で行う。


○メール送信機能について
ユーザーはメールの送信を行う事が出来る。
システムはトリガーを受けたらテンプレと可変値から文面を作成し、指定された宛先に送信する。
トリガーとなるのは以下２つ
　画面からの入力
　定時バッチ
	
	＜画面からの入力＞
	システムは以下の画面を提供する。ユーザーは各画面で以下の事が出来る。
	入力画面：
	　テキストボックスにメールの題名、宛先、内容を入力できる。
	　テンプレを選択するとテキストボックスに選択したテンプレの題名と内容が表示される。
	　（宛先もうまい事入力できるような仕組みを考える必要がある。）
	　確定ボタンを押す事で、確認画面に遷移できる。
	　送信される文面を動的に確認できる。（テキストボックスの下部に表示する予定。Optional）
	
	確認画面：
	　送信予定のメールの内容の確認が出来る
	　送信ボタンを押す事で、メールを送信し、完了画面に遷移出来る。
	　予約送信ボタンを押す事で、メールの送信予約を行い、完了画面に遷移できる。
	　戻るボタンを押す事で、入力画面に戻れる。
	
	完了画面：
	　送信結果を確認できる。
	
	＜定時バッチ＞
	システムは以下の事を行う。
	　定時になると、送信すべきメールが登録されているかどうか確認する。
	　登録されている場合は、登録ないように従ってメールの送信を行う。

○メールテンプレ作成機能について
ユーザーは画面からメールのテンプレートの登録、更新、削除を行える。
テンプレートには可変値が設定できる。例えば${練習日}とすると、日付に変わったり。詳細は別途詰める。

○予約送信機能について
ユーザーはメールの送信予約の検索、詳細参照、を行う事が出来る。

○メール送信履歴参照機能について
	ユーザーはメールの送信履歴の検索、詳細参照を行う事が出来る。
	ユーザーはメールの再送信を行う事が出来る。
	
	システムは以下の画面を提供し、ユーザーは各画面にてそれぞれ以下の事を行う事が出来る。
	検索画面：
	　送信履歴の一覧を検索する事が出来る。
	　検索項目は送信日付、メール送信種別とする。
	　送信履歴の中から１つ選択し、詳細ボタンを押す事で、詳細確認画面に遷移する事が出来る。
	詳細確認画面：
	　送信履歴の詳細を参照する事が出来る。
	　再送信ボタンを押す事で、選択したメールの再送信を行う事が出来る。
	　戻るボタンを押す事で、検索画面に遷移する事が出来る。

	システムは以下の事を行う。
	　メールの送信履歴を参照し、指定期間を超えているものを全て削除する。（指定期間については半年を想定。）

○メール関連のEntityについて。
メールテンプレート：key, name, header, content
メール送信履歴:key, to, cc, header, content, sentDate
メール送信予約：key, to, cc, header, content, sendDate
可変値リスト：key, name, value


○出欠一覧機能について

理想：
・日付、メンバーの表を表示する。
・updateについては、表内プルダウンを選択することにより、非同期処理にて行う。
	-楽観ロックについては考えず、後勝ちとする。

とりあえず（いったんのリリース）：
・１．日付指定で、メンバーの表を表示する。
	- 休団フラグがたっているメンバーは表示しない
	- 指定日付が練習日で無い場合は、画面に練習日でない旨を表示。（練習日検索画面へのリンクも表示）
・２．メンバー指定で、日付の表を表示する。
	- 日付の範囲は画面の幅が壊れないだけの数。とりあえず当日含めて５練習日。ページング機能付き。
・updateは理想的な機能と同等のものを作る。

	必要な機能
		練習日検索
			練習日を検索する
			それを画面に表示する。
			表示した練習日に、出欠一覧画面へのリンクをつける。
		
		出欠一覧（日付指定）
			受け取った練習日から、特定日の出欠一覧を取得する。
			それらを表に整形して画面に表示する。
			メンバーの名前表示部には、出欠一覧画面へのリンクをつける
			出欠表示はプルダウンとし、別のプルダウンを選択する事で、出欠の更新処理を行う。（非同期）
			リフレッシュ機能をつける。
		
		出欠一覧（メンバー指定）
			受け取ったメンバーキーから、メンバーの出欠一覧を表示する。
			それらを表に整形して画面に表示する。
			日付の表示部には、出欠一覧画面へのリンクをつける
			（共通）出欠表示はプルダウンとし、別のプルダウンを選択する事で、出欠の更新処理を行う。（非同期）
			（共通）リフレッシュ機能をつける。
	
	パス構成
		/attend/manage/attendance/
			disp
			
		/attend/manage/attendance/date/
			search/index
			search/search
			disp
			
		/attend/manage/attendance/member/
			search/index
			search/search
			disp/

○ガラケー対応について
	時間もないため、別ページを作成し機能限定版を提供する
	提供機能は以下の通り
		ログイン機能
		メニュー表示機能
		未入力一覧表示＋出欠入力（１つずつ）
		出欠確認　※当日の練習日程を確認するための機能も暗に含む
		出欠更新
	
	必要な機能
		ログイン
			ログイン情報を入力するフォームを提供する
			入力項目はID＋パスワード。
			「ログイン」ボタンで確定する。
			ログインが成功したらメニュー画面に遷移する
			ログインが失敗したら、エラーメッセージ「IDまたはパスワードが違います」と共に、自画面遷移を行う
			
		メニュー表示機能
			未入力一覧、出欠確認、メニューへのリンクを表示する。（出欠更新は対象外）
			（TBD）必要ならば操作方法や注意書きなどを表示する。
			
		未入力一覧機能
			初期表示時に、現在日付を基準日として、翌３回分の練習情報を表示し、出席をそれぞれに対して入力できる。
			１回分の練習部分に含む機能は以下
				表示項目は日時＋場所
				入力項目は出欠＋備考
				入力チェックは、出欠が時間指定のもの（遅刻、早退）の場合に、備考を必須とする。
				入力チェックエラーの場合は、エラーメッセージ「遅刻、早退の場合には、備考に時間を記入して下さい。」とともに自画面遷移を行う。
				「登録」ボタンで確定し、自画面を再表示する。
			（Optional）「最新情報更新」ボタンで最新情報の取得を行う。（自画面を再表示する。）
			
		出欠確認
			月の練習予定を表示する。
			１回分の練習部分に含む機能は以下
				表示項目は日時＋場所＋集合時間＋集合場所＋備考（練習）＋出欠＋備考（出欠）
				「更新」ボタンで更新画面に遷移する。
				「更新」ボタンは当日以前の練習については表示しない。
			「前月」ボタン、「翌月」ボタンで、それぞれ月の表示を移動できる
			練習が存在しない場合には、「練習が未定です。」というメッセージを表示する。
			画面に「本日より前の入力は更新できません。マネージャーに連絡してください。」というメッセージを表示する。
		
		出欠更新
			指定の練習の更新を行う。
			表示項目は日時＋場所＋集合時間＋集合場所＋備考（練習）
			入力項目は出欠＋備考（出欠）。
			入力項目の初期表示は入力されていたものを表示する。
			入力チェックは、出欠が時間指定のもの（遅刻、早退）の場合に、備考を必須とする。
			入力チェックエラーの場合は、エラーメッセージ「遅刻、早退の場合には、備考に時間を記入して下さい。」とともに自画面遷移を行う。
			「登録」ボタンで確定し、指定された練習日の月の出欠確認画面に遷移する。
		
	
	パス構成
		ログイン画面
			/attend/mobile/
			/attend/mobile/login
			
		メニュー
			/attend/mobile/menu/
			
		未入力一覧
			/attend/mobile/menu/inputAttendance/
			/attend/mobile/menu/inputAttendance/submit
			
		出欠確認
			/attend/mobile/menu/confirmAttendance/
			
		出欠更新
			/attend/mobile/menu/updateAttendance/
			/attend/mobile/menu/updateAttendance/submit
	
